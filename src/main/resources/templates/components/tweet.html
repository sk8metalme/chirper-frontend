<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<body>
    <!-- „ÉÑ„Ç§„Éº„ÉàË°®Á§∫„Ç≥„É≥„Éù„Éº„Éç„É≥„Éà -->
    <div th:fragment="tweet(tweet)" class="card mb-3">
        <div class="card-body">
            <!-- „É¶„Éº„Ç∂„ÉºÊÉÖÂ†± -->
            <div class="d-flex align-items-center mb-2">
                <img th:src="${tweet.avatarUrl != null ? tweet.avatarUrl : '/images/default-avatar.png'}"
                     class="rounded-circle me-2"
                     alt="Avatar"
                     width="40"
                     height="40">
                <div>
                    <h6 class="mb-0" th:text="${tweet.displayName}">Display Name</h6>
                    <small class="text-muted">@<span th:text="${tweet.username}">username</span></small>
                </div>
            </div>

            <!-- „ÉÑ„Ç§„Éº„ÉàÂÜÖÂÆπ („Éè„Ç§„É©„Ç§„ÉàÊ∏à„ÅøHTML) -->
            <p class="card-text mb-2" th:utext="${tweet.content.toHighlightedHtml()}">Tweet content</p>

            <!-- „Çø„Ç§„É†„Çπ„Çø„É≥„Éó -->
            <small class="text-muted" th:text="${tweet.timestamp.format()}">timestamp</small>

            <!-- „Ç¢„ÇØ„Ç∑„Éß„É≥„Éú„Çø„É≥ -->
            <div class="d-flex gap-3 mt-3">
                <!-- „ÅÑ„ÅÑ„Å≠ -->
                <form th:action="@{/tweets/{id}/like(id=${tweet.tweetId})}" method="post" class="d-inline">
                    <button type="submit"
                            class="btn btn-sm"
                            th:classappend="${tweet.likedByCurrentUser ? 'btn-danger' : 'btn-outline-secondary'}">
                        <span th:if="${tweet.likedByCurrentUser}">‚ù§Ô∏è</span>
                        <span th:unless="${tweet.likedByCurrentUser}">ü§ç</span>
                        <span th:text="${tweet.likeCount}">0</span>
                    </button>
                </form>

                <!-- „É™„ÉÑ„Ç§„Éº„Éà -->
                <form th:action="@{/tweets/{id}/retweet(id=${tweet.tweetId})}" method="post" class="d-inline">
                    <button type="submit"
                            class="btn btn-sm"
                            th:classappend="${tweet.retweetedByCurrentUser ? 'btn-success' : 'btn-outline-secondary'}">
                        <span>üîÅ</span>
                        <span th:text="${tweet.retweetCount}">0</span>
                    </button>
                </form>

                <!-- ÂâäÈô§„Éú„Çø„É≥ (Ëá™ÂàÜ„ÅÆ„ÉÑ„Ç§„Éº„Éà„ÅÆ„Åø) -->
                <!-- TODO: ÁèæÂú®„ÅÆ„É¶„Éº„Ç∂„ÉºID„Å®ÊØîËºÉ„Åó„Å¶Ë°®Á§∫Âà∂Âæ° -->
                <form th:action="@{/tweets/{id}/delete(id=${tweet.tweetId})}" method="post" class="d-inline ms-auto">
                    <button type="submit" class="btn btn-sm btn-outline-danger" onclick="return confirm('„Åì„ÅÆ„ÉÑ„Ç§„Éº„Éà„ÇíÂâäÈô§„Åó„Åæ„Åô„Åã?')">
                        ÂâäÈô§
                    </button>
                </form>
            </div>
        </div>
    </div>
</body>
</html>
